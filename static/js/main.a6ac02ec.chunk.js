(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{16:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var s=c(6),a=c.n(s),n=c(1),l=c.n(n),i=(c(12),c(13),c(2));function o(e){var t,c="https://mate-academy.github.io/react_dynamic-list-of-todos/api"+e+".json";return(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch(c)})).then((function(e){return e.json()}))}var d=c(0),r="all",j="active",u="completed",b=l.a.createContext({todos:[],setTodos:function(){},loading:!0,setLoading:function(){},modal:!0,setModal:function(){},filter:{select:"all",input:""},setFilter:function(){},visibleTodos:[],user:null,setUser:function(){},selectedTodo:null,setSelectedTodo:function(){},loadingModal:!1,setLoadingModal:function(){}}),O=function(e){var t=e.children,c=Object(n.useState)([]),s=Object(i.a)(c,2),a=s[0],l=s[1],O=Object(n.useState)(!0),h=Object(i.a)(O,2),m=h[0],x=h[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),p=v[0],N=v[1],y=Object(n.useState)({select:"all",input:""}),g=Object(i.a)(y,2),S=g[0],T=g[1],C=Object(n.useState)(null),k=Object(i.a)(C,2),M=k[0],w=k[1],L=Object(n.useState)(null),E=Object(i.a)(L,2),_=E[0],F=E[1],B=Object(n.useState)(!1),P=Object(i.a)(B,2),A=P[0],I=P[1],J=Object(n.useMemo)((function(){return a.filter((function(e){var t=S.select===r||S.select===j&&!e.completed||S.select===u&&e.completed,c=e.title.toLowerCase().includes(S.input.toLowerCase().trim());return t&&c}))}),[a,S]);Object(n.useEffect)((function(){o("/todos").then(l).finally((function(){return x(!1)}))}),[]),Object(n.useEffect)((function(){var e;null!==_?(e=_.id,o("/users/".concat(e))).then(w).finally((function(){return x(!1)})):(w(null),x(!1))}),[_]);var U=Object(n.useMemo)((function(){return{todos:a,setTodos:l,loading:m,setLoading:x,filter:S,setFilter:T,visibleTodos:J,modal:p,setModal:N,user:M,setUser:w,loadingModal:A,setLoadingModal:I,selectedTodo:_,setSelectedTodo:F}}),[a,l,m,x,S,T,J,p,N,M,w,A,I,_,F]);return Object(d.jsx)(b.Provider,{value:U,children:t})},h=c(3),m=c(7),x=c.n(m),f=function(){var e=Object(n.useContext)(b).setFilter,t=Object(n.useState)("all"),c=Object(i.a)(t,2),s=c[0],a=c[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),r=o[0],j=o[1],u=Object(n.useState)(""),O=Object(i.a)(u,2),m=O[0],f=O[1];Object(n.useEffect)((function(){e((function(e){return Object(h.a)(Object(h.a)({},e),{},{select:s,input:m})}))}),[s,m,e]);var v=x()((function(e){f(e)}),1e3);return Object(d.jsxs)("form",{className:"field has-addons",children:[Object(d.jsx)("p",{className:"control",children:Object(d.jsx)("span",{className:"select",children:Object(d.jsxs)("select",{"data-cy":"statusSelect",onChange:function(e){return a(e.target.value)},value:s,children:[Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"active",children:"Active"}),Object(d.jsx)("option",{value:"completed",children:"Completed"})]})})}),Object(d.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(d.jsx)("input",{"data-cy":"searchInput",type:"text",className:"input",placeholder:"Search...",onChange:function(e){var t=e.target.value;j(t),v(t)},value:r}),Object(d.jsx)("span",{className:"icon is-left",children:Object(d.jsx)("i",{className:"fas fa-magnifying-glass"})}),Object(d.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},children:Object(d.jsx)("button",{"data-cy":"clearSearchButton",type:"button",className:"delete",onClick:function(){j(""),e((function(e){return Object(h.a)(Object(h.a)({},e),{},{input:""})}))}})})]})]})},v=c(5),p=c.n(v),N=function(){var e=Object(n.useContext)(b),t=e.visibleTodos,c=e.setModal,s=e.setSelectedTodo,a=e.modal,l=Object(n.useState)(null),o=Object(i.a)(l,2),r=o[0],j=o[1];Object(n.useEffect)((function(){a||j(null)}),[a,c]);return Object(d.jsxs)("table",{className:"table is-narrow is-fullwidth",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:"fas fa-check"})})}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:" "})]})}),Object(d.jsx)("tbody",{children:t.map((function(e){return Object(d.jsxs)("tr",{"data-cy":"todo",className:"",children:[Object(d.jsx)("td",{className:"is-vcentered",children:e.id}),Object(d.jsx)("td",{className:"is-vcentered",children:e.completed&&Object(d.jsx)("span",{className:"icon","data-cy":"iconCompleted",children:Object(d.jsx)("i",{className:"fas fa-check"})})}),Object(d.jsx)("td",{className:"is-vcentered is-expanded",children:Object(d.jsx)("p",{className:p()({"has-text-success":e.completed,"has-text-danger":!e.completed}),children:e.title})}),Object(d.jsx)("td",{className:"has-text-right is-vcentered",children:Object(d.jsx)("button",{"data-cy":"selectButton",className:"button",type:"button",onClick:function(){return function(e){j(e.id),c(!0),s(Object(h.a)({},e))}(e)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:p()({"far fa-eye":r!==e.id,"far fa-eye-slash":r===e.id})})})})})]},e.id)}))})]})},y=(c(16),function(){return Object(d.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(d.jsx)("div",{className:"Loader__content"})})}),g=function(){var e=Object(n.useContext)(b),t=e.loadingModal,c=e.user,s=e.selectedTodo,a=e.setModal;return Object(d.jsxs)("div",{className:"modal is-active","data-cy":"modal",children:[Object(d.jsx)("div",{className:"modal-background"}),t?Object(d.jsx)(y,{}):Object(d.jsxs)("div",{className:"modal-card",children:[Object(d.jsxs)("header",{className:"modal-card-head",children:[Object(d.jsx)("div",{className:"modal-card-title has-text-weight-medium","data-cy":"modal-header",children:"Todo #".concat(null===s||void 0===s?void 0:s.id)}),Object(d.jsx)("button",{type:"button",className:"delete","data-cy":"modal-close",onClick:function(){a(!1)}})]}),Object(d.jsxs)("div",{className:"modal-card-body",children:[Object(d.jsx)("p",{className:"block","data-cy":"modal-title",children:null===s||void 0===s?void 0:s.title}),Object(d.jsxs)("p",{className:"block","data-cy":"modal-user",children:[null!==s&&void 0!==s&&s.completed?Object(d.jsx)("strong",{className:"has-text-success",children:"Done"}):Object(d.jsx)("strong",{className:"has-text-danger",children:"Planned"})," by ",Object(d.jsx)("a",{href:"mailto:".concat(null===c||void 0===c?void 0:c.email),children:null===c||void 0===c?void 0:c.name})]})]})]})]})},S=function(){var e=Object(n.useContext)(b),t=e.loading,c=e.modal;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"section",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"box",children:[Object(d.jsx)("h1",{className:"title",children:"Todos:"}),Object(d.jsx)("div",{className:"block",children:Object(d.jsx)(f,{})}),Object(d.jsx)("div",{className:"block",children:t?Object(d.jsx)(y,{}):Object(d.jsx)(N,{})})]})})}),c&&Object(d.jsx)(g,{})]})},T=function(){return Object(d.jsx)(O,{children:Object(d.jsx)(S,{})})};a.a.render(Object(d.jsx)(T,{}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a6ac02ec.chunk.js.map